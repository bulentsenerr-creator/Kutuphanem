:root{--bg:#0b1220;--card:#111a2e;--txt:#e8eefc;--muted:#a9b6d3;--link:#7cc0ff;--code:#0a0f1d;--border:#233253;--danger:#ff6b6b;--ok:#5eead4;}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--txt)}
.wrap{max-width:1200px;margin:0 auto;padding:16px}
.topbar{position:sticky;top:0;z-index:5;background:rgba(11,18,32,.9);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
.brand{display:flex;align-items:center;gap:12px}
.logo{font-size:28px}
.title{font-weight:800}
.subtitle{color:var(--muted);font-size:12px;margin-top:2px}
.actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
@media (max-width: 980px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px}
.card h2{margin:6px 0 10px 0}
.row{display:flex;gap:10px;align-items:end;flex-wrap:wrap}
.row.end{justify-content:flex-end}
label{display:flex;flex-direction:column;gap:6px;min-width:220px;flex:1}
label.full{grid-column:1 / -1}
input,select,textarea{background:#0a0f1d;border:1px solid var(--border);border-radius:10px;padding:10px;color:var(--txt);outline:none}
input:focus,select:focus,textarea:focus{border-color:var(--link)}
.btn{border:1px solid var(--border);background:#0a0f1d;color:var(--txt);padding:10px 12px;border-radius:12px;cursor:pointer}
.btn.primary{background:linear-gradient(135deg,#1b72ff,#7cc0ff);border-color:transparent;color:#07101f;font-weight:800}
.btn.ghost{background:transparent}
.btn.danger{border-color:rgba(255,107,107,.35);color:var(--danger)}
.btn:hover{filter:brightness(1.05)}
.btn.file{position:relative;overflow:hidden}
.btn.file input{position:absolute;inset:0;opacity:0;cursor:pointer}
.small{color:var(--muted);font-size:12px}
.status{margin-top:10px;padding:10px;border-radius:12px;border:1px dashed var(--border);color:var(--muted)}
.status.ok{border-color:rgba(94,234,212,.35);color:var(--ok)}
.status.err{border-color:rgba(255,107,107,.35);color:var(--danger)}
.settings{margin-top:10px}
.settings summary{cursor:pointer;color:var(--link)}
.hint{margin:10px 0 0 0;color:var(--muted);font-size:12px}
.two{display:grid;grid-template-columns:280px 1fr;gap:16px;margin-top:12px}
@media (max-width: 980px){.two{grid-template-columns:1fr}}
.coverBox{border:1px solid var(--border);border-radius:14px;padding:10px;background:#0a0f1d}
.coverBox img{width:100%;max-width:260px;aspect-ratio:2/3;object-fit:cover;border-radius:12px;border:1px solid var(--border);display:block}
.form.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media (max-width: 700px){.form.grid2{grid-template-columns:1fr}}
.library{display:flex;flex-direction:column;gap:10px}
.item{display:grid;grid-template-columns:64px 1fr auto;gap:10px;align-items:center;border:1px solid var(--border);border-radius:14px;padding:10px;background:#0a0f1d}
.item img{width:64px;height:96px;object-fit:cover;border-radius:10px;border:1px solid var(--border)}
.item .meta .name{font-weight:800}
.item .meta .sub{color:var(--muted);font-size:12px}
.item .btns{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
.footer{padding-bottom:28px}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.65);display:grid;place-items:center;padding:16px;z-index:20}
.modal[hidden]{display:none !important;} /* FIX: allow close */
.modalCard{width:min(720px,100%);background:var(--card);border:1px solid var(--border);border-radius:16px;padding:12px}
.modalTop{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px}
.modalBtns{display:flex;gap:10px;flex-wrap:wrap}
.modalTitle{font-weight:800}
#scanVideo{width:100%;background:black;border-radius:14px;border:1px solid var(--border);aspect-ratio:16/9;object-fit:cover}
